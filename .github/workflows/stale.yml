name: Stale Issues and PRs

on:
  schedule:
    # Run daily at 1:00 AM UTC
    - cron: '0 1 * * *'
  workflow_dispatch:

jobs:
  stale:
    runs-on: ubuntu-latest
    permissions:
      issues: write
      pull-requests: write
    
    steps:
    - name: Mark stale issues and PRs
      uses: actions/stale@v9
      with:
        repo-token: ${{ secrets.GITHUB_TOKEN }}
        
        # Issue settings
        stale-issue-message: |
          This issue has been automatically marked as stale because it has not had recent activity. 
          It will be closed if no further activity occurs within 7 days. 
          Thank you for your contributions!
        close-issue-message: |
          This issue has been automatically closed due to inactivity. 
          If this is still relevant, please feel free to reopen it or create a new issue.
        days-before-issue-stale: 60
        days-before-issue-close: 7
        stale-issue-label: 'stale'
        exempt-issue-labels: 'pinned,security,good-first-issue'
        
        # PR settings
        stale-pr-message: |
          This pull request has been automatically marked as stale because it has not had recent activity.
          It will be closed if no further activity occurs within 14 days.
          Please update this PR or it will be closed. Thank you!
        close-pr-message: |
          This pull request has been automatically closed due to inactivity.
          If you would like to continue working on this, please reopen it.
        days-before-pr-stale: 45
        days-before-pr-close: 14
        stale-pr-label: 'stale'
        exempt-pr-labels: 'pinned,security,work-in-progress'
        
        # General settings
        operations-per-run: 100
        remove-stale-when-updated: true
